# Yishe Uploader Web 控制台使用说明

## 功能概述

Web 控制台提供了一个简洁的管理系统风格图形界面来操作 yishe-uploader 的各种脚本功能，包括：

- **登录状态管理**: 检查各平台登录状态，同步小红书认证
- **产品查询**: 根据产品ID或代码查询产品信息
- **单产品发布**: 发布单个产品到指定平台
- **单平台发布**: 发布到单个平台
- **批量发布**: 批量发布到多个平台
- **浏览器管理**: 启动、关闭、检查浏览器状态
- **其他功能**: 从文件发布等

## 启动方式

前后端共用同一 `package.json` 和 `node_modules`，前端代码在 `web/` 目录，构建配置在 `web/vite.config.js`。

```bash
# 开发：先启动后端，再启动前端开发服务器
npm run dev          # 后端 7010
npm run web:dev      # 前端开发服务器 5173，API 代理到 7010

# 生产：构建前端后启动后端
npm start            # 会先构建 web 再启动后端
```

## 访问地址

- 开发：`http://localhost:5173`（Vite 开发服务器）
- 生产：`http://localhost:7010`（后端同端口提供 API + 静态资源）

## 界面说明

### 1. 登录状态管理
- **检查登录**: 检查各平台的登录状态
- **同步小红书**: 同步小红书认证信息

### 2. 产品查询
- **环境选择**: 生产环境/开发环境
- **产品ID**: 输入产品ID进行查询
- **产品代码**: 输入产品代码进行查询

### 3. 单产品发布
- **环境选择**: 生产环境/开发环境
- **产品ID/代码**: 指定要发布的产品
- **发布平台**: 选择发布平台（默认：小红书,微博,抖音,快手）

### 4. 单平台发布
- **环境选择**: 生产环境/开发环境
- **平台按钮**: 点击对应平台按钮进行发布

### 5. 批量发布
- **环境选择**: 生产环境/开发环境
- **数据索引**: 指定数据索引（默认：0）
- **发布平台**: 选择发布平台

### 6. 浏览器管理
- **启动**: 启动浏览器
- **启动(保持)**: 启动浏览器并保持开启
- **状态**: 检查浏览器状态
- **关闭**: 关闭浏览器

### 7. 其他功能
- **从文件发布**: 从文件读取数据进行发布

## 使用流程

### 基本使用流程
1. **启动服务**: `npm run web`
2. **检查登录**: 点击"检查登录"按钮
3. **查询产品**: 输入产品ID或代码查询
4. **发布产品**: 选择发布方式并执行

### 单产品发布流程
1. 在"产品查询"中输入产品ID或代码
2. 点击"查询产品"确认产品信息
3. 在"单产品发布"中输入相同ID/代码
4. 选择发布平台
5. 点击"发布产品"

### 批量发布流程
1. 设置环境（生产/开发）
2. 设置数据索引（通常为0）
3. 选择发布平台
4. 点击"批量发布"

## 注意事项

1. **环境选择**: 确保选择正确的环境（生产/开发）
2. **登录状态**: 发布前请确保各平台已登录
3. **网络连接**: 确保网络连接稳定
4. **浏览器状态**: 如遇到问题，可尝试重启浏览器

## 故障排除

### 常见问题

1. **服务器启动失败**
   - 检查端口3000是否被占用
   - 确认依赖包已正确安装

2. **脚本执行失败**
   - 检查脚本文件是否存在
   - 确认环境变量配置正确

3. **浏览器启动失败**
   - 检查系统是否安装了Chrome浏览器
   - 尝试手动启动浏览器

4. **发布失败**
   - 检查登录状态
   - 确认产品ID/代码正确
   - 检查网络连接

### 调试模式

如需查看详细日志，可修改 `scripts/web-server.js` 中的日志级别。

## 技术架构

- **后端**: Node.js HTTP 服务器（`src/api/server.js`）
- **前端**: Vue3 + Vite，代码在 `web/`，共用根目录 package.json
- **API**: RESTful API 设计
- **脚本集成**: 直接调用现有脚本文件

## 扩展功能

如需添加新功能，可以：

1. 在后端 `src/api/server.js` 中添加新的 API 路由
2. 在 `web/` 中修改界面与交互逻辑

## 安全说明

- 本服务仅在本地运行，不对外暴露
- 请勿在生产环境中直接暴露此服务
- 建议设置适当的访问控制
