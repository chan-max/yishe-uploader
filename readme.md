# Yishe Uploader

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¤šå¹³å°ç¤¾äº¤åª’ä½“è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿï¼Œæ”¯æŒæŠ–éŸ³ã€å¿«æ‰‹ã€å°çº¢ä¹¦ã€å¾®åšç­‰å¤šä¸ªä¸»æµå¹³å°ã€‚é‡‡ç”¨ Vue3 + Playwright æŠ€æœ¯æ ˆï¼Œæä¾›å‹å¥½çš„ Web ç•Œé¢å’Œå®Œå–„çš„ API æ¥å£ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **å¤šå¹³å°æ”¯æŒ**: æ”¯æŒæŠ–éŸ³ã€å¿«æ‰‹ã€å°çº¢ä¹¦ã€å¾®åšã€è…¾è®¯è§†é¢‘å·ã€Bç«™ç­‰ä¸»æµå¹³å°
- ğŸ¨ **ç°ä»£åŒ–UI**: åŸºäº Vue3 + Element Plus çš„ç¾è§‚ç•Œé¢
- ğŸ”„ **æ‰¹é‡å‘å¸ƒ**: ä¸€é”®å‘å¸ƒåˆ°å¤šä¸ªå¹³å°ï¼Œæ”¯æŒå¹¶å‘å’Œé¡ºåºæ¨¡å¼
- â° **å®šæ—¶å‘å¸ƒ**: æ”¯æŒè®¾ç½®å®šæ—¶å‘å¸ƒä»»åŠ¡
- ğŸ¬ **å¤šåª’ä½“æ”¯æŒ**: æ”¯æŒè§†é¢‘å’Œå›¾ç‰‡å†…å®¹å‘å¸ƒ
- ğŸ·ï¸ **è¯é¢˜æ ‡ç­¾**: è‡ªåŠ¨æ·»åŠ è¯é¢˜æ ‡ç­¾
- ğŸ“ **åœ°ç†ä½ç½®**: æ”¯æŒè®¾ç½®å‘å¸ƒåœ°ç†ä½ç½®
- ğŸ”— **å•†å“é“¾æ¥**: æ”¯æŒæ·»åŠ å•†å“é“¾æ¥ï¼ˆæŠ–éŸ³ï¼‰
- ğŸ¤– **åæ£€æµ‹**: å†…ç½®åæ£€æµ‹æœºåˆ¶ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ
- ğŸ“Š **å‘å¸ƒå†å²**: å®Œæ•´çš„å‘å¸ƒè®°å½•å’ŒçŠ¶æ€è¿½è¸ª
- ğŸ”Œ **APIæ¥å£**: æä¾› RESTful APIï¼Œæ–¹ä¾¿é›†æˆåˆ°å…¶ä»–ç³»ç»Ÿ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- Chrome/Chromium æµè§ˆå™¨

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/yishe-uploader.git
cd yishe-uploader

# å®‰è£…ä¾èµ–ï¼ˆå‰åç«¯å…±ç”¨åŒä¸€ package.json å’Œ node_modulesï¼‰
npm install
```

### å¯åŠ¨

```bash
# ä¸€é”®å¯åŠ¨ï¼šæ„å»ºå‰ç«¯ + å¯åŠ¨åç«¯ï¼ˆç«¯å£ 7010ï¼‰
npm start

# æˆ–åˆ†åˆ«å¯åŠ¨ï¼š
# 1. å…ˆæ„å»ºå‰ç«¯ï¼šnpm run web:build
# 2. å†å¯åŠ¨åç«¯ï¼šnpm run dev

# å‰ç«¯å¼€å‘æ¨¡å¼ï¼ˆç«¯å£ 5173ï¼Œéœ€åç«¯è¿è¡Œåœ¨ 7010ï¼‰
npm run web:dev
```

è®¿é—® http://localhost:7010 å³å¯ä½¿ç”¨ Web ç•Œé¢ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

### Web ç•Œé¢ä½¿ç”¨

1. **è´¦å·ç®¡ç†**
   - è¿›å…¥"è´¦å·ç®¡ç†"é¡µé¢
   - ç‚¹å‡»"æ·»åŠ è´¦å·"
   - é€‰æ‹©å¹³å°å¹¶å®Œæˆç™»å½•æˆæƒ

2. **å†…å®¹å‘å¸ƒ**
   - è¿›å…¥"å†…å®¹å‘å¸ƒ"é¡µé¢
   - é€‰æ‹©è¦å‘å¸ƒçš„å¹³å°
   - ä¸Šä¼ è§†é¢‘æˆ–å›¾ç‰‡
   - å¡«å†™æ ‡é¢˜ã€æè¿°å’Œè¯é¢˜æ ‡ç­¾
   - ç‚¹å‡»"ç«‹å³å‘å¸ƒ"æˆ–è®¾ç½®å®šæ—¶å‘å¸ƒ

3. **æŸ¥çœ‹å†å²**
   - è¿›å…¥"å‘å¸ƒå†å²"é¡µé¢
   - æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒè®°å½•å’ŒçŠ¶æ€
   - æ”¯æŒæŒ‰å¹³å°ã€çŠ¶æ€ã€æ—¶é—´ç­›é€‰

### API è°ƒç”¨

å‘å¸ƒä½¿ç”¨**ç»Ÿä¸€æ¥å£**ï¼Œå•å¹³å°æˆ–å¤šå¹³å°å‡ä¸º `POST /api/publish`ï¼Œé€šè¿‡å‚æ•°åŒºåˆ†ï¼š

- **å•å¹³å°**ï¼šä¼  `platform`ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œå¦‚ `"douyin"`
- **å¤šå¹³å°**ï¼šä¼  `platforms`ï¼ˆæ•°ç»„ï¼‰ï¼Œå¦‚ `["douyin", "xiaohongshu"]`

å®Œæ•´å‚æ•°ä¸ç¤ºä¾‹è§ [docs/API.md](docs/API.md)ã€‚å‘ç°æ¥å£ï¼š`GET /api` è¿”å›ç«¯ç‚¹åˆ—è¡¨ï¼Œ`GET /api/docs` è¿”å› OpenAPI é£æ ¼ JSONã€‚

```javascript
// å•å¹³å°
POST /api/publish  { "platform": "douyin", "title": "æ ‡é¢˜", "filePath": "å…ˆä¸Šä¼ è·å¾—" }

// å¤šå¹³å°
POST /api/publish  { "platforms": ["douyin", "xiaohongshu"], "title": "æ ‡é¢˜", "filePath": "...", "concurrent": false }
```

#### åˆ›å»ºå®šæ—¶å‘å¸ƒä»»åŠ¡

```javascript
POST /api/schedule

{
  "platforms": ["douyin", "kuaishou"],
  "title": "è§†é¢‘æ ‡é¢˜",
  "content": "è§†é¢‘æè¿°",
  "videoUrl": "/path/to/video.mp4",
  "scheduleTime": "2026-02-04T10:00:00Z"
}
```

#### è·å–æ”¯æŒçš„å¹³å°åˆ—è¡¨

```javascript
GET /api/platforms

// å“åº”
{
  "platforms": ["douyin", "kuaishou", "xiaohongshu", "weibo"]
}
```

## ğŸ¯ æ”¯æŒçš„å¹³å°

| å¹³å° | çŠ¶æ€ | è§†é¢‘ | å›¾ç‰‡ | å®šæ—¶å‘å¸ƒ | ç‰¹æ®ŠåŠŸèƒ½ |
|------|------|------|------|----------|----------|
| æŠ–éŸ³ | âœ… | âœ… | âœ… | âœ… | å•†å“é“¾æ¥ã€åœ°ç†ä½ç½® |
| å¿«æ‰‹ | âœ… | âœ… | âœ… | âœ… | æœ€å¤š3ä¸ªè¯é¢˜ |
| å°çº¢ä¹¦ | âœ… | âœ… | âœ… | âœ… | åœ°ç†ä½ç½® |
| å¾®åš | âœ… | âœ… | âœ… | âŒ | - |
| è…¾è®¯è§†é¢‘å· | ğŸš§ | âœ… | âŒ | âœ… | åŸåˆ›å£°æ˜ã€åˆé›† |
| Bç«™ | ğŸš§ | âœ… | âŒ | âœ… | åˆ†åŒºé€‰æ‹© |
| TikTok | ğŸš§ | âœ… | âŒ | âœ… | - |
| ç™¾å®¶å· | ğŸš§ | âœ… | âŒ | âœ… | - |

âœ… å·²å®Œæˆ | ğŸš§ å¼€å‘ä¸­ | âŒ ä¸æ”¯æŒ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
yishe-uploader/
â”œâ”€â”€ frontend/                 # Vue3 å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/             # API æ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ components/      # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/          # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ views/           # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ src/                      # åç«¯æºç 
â”‚   â”œâ”€â”€ api/                 # API æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ publishService.js  # å‘å¸ƒæœåŠ¡
â”‚   â”‚   â””â”€â”€ server.js          # HTTP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â””â”€â”€ platforms.js
â”‚   â”œâ”€â”€ platforms/           # å¹³å°å®ç°ï¼ˆç‹¬ç«‹æ¨¡å—ï¼‰
â”‚   â”‚   â”œâ”€â”€ douyin.js        # æŠ–éŸ³
â”‚   â”‚   â”œâ”€â”€ kuaishou.js      # å¿«æ‰‹
â”‚   â”‚   â”œâ”€â”€ xiaohongshu.js   # å°çº¢ä¹¦
â”‚   â”‚   â”œâ”€â”€ weibo.js         # å¾®åš
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/            # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ BrowserService.js  # æµè§ˆå™¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ImageManager.js    # å›¾ç‰‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ LoginChecker.js    # ç™»å½•æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ PageOperator.js    # é¡µé¢æ“ä½œ
â”‚   â”‚   â””â”€â”€ PublishService.js  # å‘å¸ƒæœåŠ¡
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.js        # æ—¥å¿—å·¥å…·
â”‚       â”œâ”€â”€ *Auth.js         # å„å¹³å°è®¤è¯
â”‚       â””â”€â”€ ...
â”œâ”€â”€ auth-data/               # è®¤è¯æ•°æ®ï¼ˆgitignoreï¼‰
â”œâ”€â”€ temp/                    # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ”§ é…ç½®è¯´æ˜

### æµè§ˆå™¨é…ç½®

ç³»ç»Ÿæ”¯æŒä¸¤ç§æµè§ˆå™¨è¿æ¥æ¨¡å¼ï¼š

1. **æŒä¹…åŒ–æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰**: ä½¿ç”¨æœ¬åœ° Chrome çš„ç”¨æˆ·æ•°æ®ç›®å½•ï¼Œè‡ªåŠ¨ç»§æ‰¿ç™»å½•çŠ¶æ€
   ```bash
   # ç¯å¢ƒå˜é‡
   BROWSER_MODE=persistent
   CHROME_USER_DATA_DIR=/path/to/chrome/user/data
   CHROME_PROFILE_DIR=Default
   ```

2. **CDP æ¨¡å¼**: è¿æ¥å·²å¯åŠ¨çš„ Chrome å®ä¾‹
   ```bash
   # ç¯å¢ƒå˜é‡
   BROWSER_MODE=cdp
   CDP_ENDPOINT=http://127.0.0.1:9222
   
   # å¯åŠ¨ Chromeï¼ˆéœ€å…ˆå®Œå…¨å…³é—­ Chromeï¼‰
   chrome --remote-debugging-port=9222
   ```

### å¹³å°è®¤è¯

æ¯ä¸ªå¹³å°éœ€è¦å…ˆè¿›è¡Œè®¤è¯æˆæƒï¼š

1. é€šè¿‡ Web ç•Œé¢çš„"è´¦å·ç®¡ç†"æ·»åŠ è´¦å·
2. é€‰æ‹©"æµè§ˆå™¨ç™»å½•"æ–¹å¼ï¼Œç³»ç»Ÿä¼šæ‰“å¼€æµè§ˆå™¨
3. æ‰‹åŠ¨å®Œæˆç™»å½•æµç¨‹
4. ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿè‡ªåŠ¨ä¿å­˜è®¤è¯ä¿¡æ¯

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å¹³å°

1. åœ¨ `src/platforms/` åˆ›å»ºæ–°å¹³å°æ–‡ä»¶ï¼Œå¦‚ `newplatform.js`
2. å®ç°å‘å¸ƒå™¨ç±»ï¼Œå‚è€ƒç°æœ‰å¹³å°å®ç°
3. åœ¨ `src/api/publishService.js` æ³¨å†Œæ–°å¹³å°
4. åœ¨å‰ç«¯ `stores/platform.js` æ·»åŠ å¹³å°ä¿¡æ¯

ç¤ºä¾‹ä»£ç ç»“æ„ï¼š

```javascript
// src/platforms/newplatform.js
class NewPlatformPublisher {
    constructor() {
        this.platformName = 'æ–°å¹³å°';
        this.uploadUrl = 'https://...';
    }

    async publish(publishInfo) {
        // 1. è·å–æµè§ˆå™¨
        // 2. åº”ç”¨è®¤è¯
        // 3. å¯¼èˆªåˆ°ä¸Šä¼ é¡µé¢
        // 4. ä¸Šä¼ æ–‡ä»¶
        // 5. å¡«å†™ä¿¡æ¯
        // 6. ç‚¹å‡»å‘å¸ƒ
        // 7. ç­‰å¾…å®Œæˆ
    }
}

export async function publishToNewPlatform(publishInfo) {
    const publisher = new NewPlatformPublisher();
    return await publisher.publish(publishInfo);
}
```

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æµè§ˆå™¨æ“ä½œ**: è®¾ç½® `headless: false` å¯ä»¥çœ‹åˆ°æµè§ˆå™¨æ“ä½œè¿‡ç¨‹
2. **æˆªå›¾è°ƒè¯•**: ä»£ç ä¸­å·²å†…ç½®é”™è¯¯æˆªå›¾åŠŸèƒ½
3. **æ—¥å¿—è¾“å‡º**: ä½¿ç”¨ `logger` è¾“å‡ºè¯¦ç»†æ—¥å¿—
4. **å…ƒç´ å®šä½**: ä½¿ç”¨ Playwright Inspector å·¥å…·

```bash
# å¯åŠ¨ Playwright Inspector
npx playwright inspector
```

## ğŸ¤ å‚è€ƒé¡¹ç›®

æœ¬é¡¹ç›®å‚è€ƒäº†ä»¥ä¸‹ä¼˜ç§€å¼€æºé¡¹ç›®ï¼š

- [social-auto-upload](https://github.com/dreammis/social-auto-upload) - Python ç‰ˆæœ¬çš„ç¤¾äº¤åª’ä½“è‡ªåŠ¨å‘å¸ƒå·¥å…·
- æ„Ÿè°¢åŸä½œè€…æä¾›çš„è¯¦ç»†å®ç°æ€è·¯å’Œå¹³å°æ“ä½œæµç¨‹

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

## ğŸ“® è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/your-username/yishe-uploader/issues)
- é‚®ç®±: your-email@example.com

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆå„å¹³å°çš„ä½¿ç”¨æ¡æ¬¾å’Œç›¸å…³æ³•å¾‹æ³•è§„ã€‚
